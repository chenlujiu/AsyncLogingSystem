# High-Performence-AsyncLogStream
多线程双缓冲异步日志
仿照了MUDUO的日志设计，在原有的基础上做了简化，仅供学习。
这个日志模块用于多线程环境，在多线程环境下为每一个需要日志服务的线程创建一个背景线程，由当前线程生成日志，背景线程负责把日志写入日志文件。
分为前端后端的好处是，对于前端来讲，写入日志低延迟，低CPU开销，无阻塞，不会让日志成为服务器的瓶颈，对于后端来讲，日志被打包成块，极大的减少了调用IO的次数，
做到了足够大的吞吐量，占用较少的资源。
双缓冲的含义在于，准备两块buffer：A和B，前端负责往bufferA里填充日志信息，后端负责讲bufferB的数据写入文件。当bufferA写满之后，交换A和B，让后端讲bufferA
的数据写入文件，而前端则往bufferB里填充新的日志信息，如此往复。
用两个buffer的好处是在新建日志消息的时候不必等待磁盘文件操作，也避免每条新的日志消息都触发后端日志进程。换言之，前端不是讲一条条日志消息分别传送给后端，相当于
批处理，减少了线程的唤醒次数，提高了效率。另外，为了及时将日志消息写入文件，即便bufferA未满，日志库也会每三秒执行一次上述交换写入操作。
